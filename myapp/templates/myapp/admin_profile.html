{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Profile | Wildcat Watch</title>

  <link rel="stylesheet" href="{% static 'wildcatwatch/css/admin_dashboard.css' %}">
  <link rel="stylesheet" href="{% static 'wildcatwatch/css/admin_profile.css' %}">
</head>
<body data-admin-id="{{ request.user.id }}">

  <!-- ===== Header ===== -->
  <header class="header">
    <div class="header-container">
      <div class="logo">
        <div class="shield-icon">üõ°Ô∏è</div> 
        <h1>Wildcat Watch</h1>
      </div>
      <nav class="nav">
        <a href="{% url 'admin_dashboard' %}">Dashboard</a>
        <a href="{% url 'admin_profile' %}" class="active">Profile</a>
        <a href="{% url 'reports' %}">Reports</a>
        <a href="{% url 'manage_staff' %}">Manage Staff</a>
        <a href="#">Settings</a>
      </nav>
      <a href="{% url 'logout' %}" class="logout-btn">Logout</a>
    </div>
  </header>

  <!-- ===== Main Content ===== -->
  <main class="main-content">
    <div class="container">
      <div class="profile-card">
        <h2>Admin Profile</h2>

        <!-- ====================== DISPLAY MODE ====================== -->
        <div id="profile-display">
          <div class="info-grid">
            <div class="info-item">
              <label>Full Name</label>
              <p id="display-fullname-text">{{ profile.fullname|default:"Not Set" }}</p>
            </div>

            <div class="info-item">
              <label>Date of Birth</label>
              <p id="display-dob-text">{{ profile.dob|date:"F d, Y"|default:"Not Set" }}</p>
            </div>

            <div class="info-item">
              <label>Age</label>
              <p id="display-age-text">{{ profile.age|default:"Not Set" }}</p>
            </div>

            <div class="info-item">
              <label>Gender</label>
              <p id="display-gender-text">{{ profile.gender|default:"Not Set" }}</p>
            </div>

            <div class="info-item">
              <label>Blood Type</label>
              <p id="display-blood_type-text">{{ profile.blood_type|default:"Not Set" }}</p>
            </div>

            <div class="info-item">
              <label>Nationality</label>
              <p id="display-nationality-text">{{ profile.nationality|default:"Filipino" }}</p>
            </div>

            <div class="info-item">
              <label>Phone</label>
              <p id="display-phone-text">{{ profile.phone|default:"Not Set" }}</p>
            </div>

            <div class="info-item">
              <label>Emergency Contact</label>
              <p id="display-emergency_contact-text">{{ profile.emergency_contact|default:"Not Set" }}</p>
            </div>

            <div class="info-item full-width">
              <label>Address</label>
              <p id="display-address-text">{{ profile.address|default:"Not Set" }}</p>
            </div>

            <div class="info-item">
              <label>Work Schedule</label>
              <p id="display-work_schedule-text">{{ profile.work_schedule|default:"Mon‚ÄìFri 9AM‚Äì5PM" }}</p>
            </div>
          </div>

          <div style="text-align:center; margin-top: 2rem;">
            <button class="edit-btn" onclick="toggleEdit()">Edit Profile</button>
          </div>
        </div>

        <!-- ====================== EDIT MODE ====================== -->
        <form id="profile-form" class="edit-form" method="POST">
          {% csrf_token %}

          <div class="info-grid">
            <div class="info-item">
              <label>Full Name</label>
              <input type="text" name="fullname" value="{{ profile.fullname|default:'' }}">
            </div>

            <div class="info-item">
              <label>Date of Birth</label>
              <input type="date" name="dob" value="{{ profile.dob|date:'Y-m-d' }}">
            </div>

            <div class="info-item">
              <label>Age</label>
              <input type="number" name="age" value="{{ profile.age|default:'' }}" readonly>
            </div>

            <div class="info-item">
              <label>Gender</label>
              <select name="gender">
                <option value="">-- Select --</option>
                <option value="Male"   {% if profile.gender == "Male" %}selected{% endif %}>Male</option>
                <option value="Female" {% if profile.gender == "Female" %}selected{% endif %}>Female</option>
                <option value="Other"  {% if profile.gender == "Other" %}selected{% endif %}>Other</option>
              </select>
            </div>

            <div class="info-item">
              <label>Blood Type</label>
              <select name="blood_type">
                <option value="">Select Blood Type</option>
                <option value="O+" {% if profile.blood_type == 'O+' %}selected{% endif %}>O+</option>
                <option value="O-" {% if profile.blood_type == 'O-' %}selected{% endif %}>O-</option>
                <option value="A+" {% if profile.blood_type == 'A+' %}selected{% endif %}>A+</option>
                <option value="A-" {% if profile.blood_type == 'A-' %}selected{% endif %}>A-</option>
                <option value="B+" {% if profile.blood_type == 'B+' %}selected{% endif %}>B+</option>
                <option value="B-" {% if profile.blood_type == 'B-' %}selected{% endif %}>B-</option>
                <option value="AB+" {% if profile.blood_type == 'AB+' %}selected{% endif %}>AB+</option>
                <option value="AB-" {% if profile.blood_type == 'AB-' %}selected{% endif %}>AB-</option>
              </select>
            </div>

            <div class="info-item">
              <label>Nationality</label>
              <input type="text" name="nationality" value="{{ profile.nationality|default:'Filipino' }}">
            </div>

            <div class="info-item">
              <label>Phone</label>
              <input type="text" name="phone" value="{{ profile.phone|default:'' }}" placeholder="11 digits (e.g., 09123456789)" maxlength="11" inputmode="numeric" pattern="[0-9]{11}">
            </div>

            <div class="info-item">
              <label>Emergency Contact</label>
              <input type="text" name="emergency_contact" value="{{ profile.emergency_contact|default:'' }}" placeholder="11 digits (e.g., 09123456789)" maxlength="11" inputmode="numeric" pattern="[0-9]{11}">
            </div>

            <div class="info-item full-width">
              <label>Address</label>
              <input type="text" name="address" value="{{ profile.address|default:'' }}">
            </div>

            <div class="info-item">
              <label>Work Schedule</label>
              <input type="text" name="work_schedule" value="{{ profile.work_schedule|default:'Mon‚ÄìFri 9AM‚Äì5PM' }}">
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="save-btn">Save Changes</button>
            <button type="button" class="cancel-btn" onclick="toggleEdit()">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <!-- Pass URL variable to JS -->
  <script>
    const updateProfileUrl = "{% url 'update_admin_profile' %}";
  </script>

  <!-- Include JS file -->
  <script src="{% static 'wildcatwatch/js/admin_profile.js' %}"></script>
</body>
</html>
