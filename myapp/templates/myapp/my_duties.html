{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Duties | Wildcat Watch</title>
  <link rel="stylesheet" href="{% static 'wildcatwatch/css/staff_dashboard.css' %}">
  <link rel="stylesheet" href="{% static 'wildcatwatch/css/my_duties.css' %}">
</head>
<body>
  <header class="header">
    <div class="header-container">
      <div class="logo">
        <div class="shield-icon">üõ°Ô∏è</div>
        <h1>Wildcat Watch</h1>
      </div>
      <nav class="nav">
        <a href="{% url 'staff_dashboard' %}">Dashboard</a>
        <a href="{% url 'my_duties' %}" class="active">My Duties</a>
        <a href="{% url 'attendance_dashboard' %}">Attendance</a>
        <a href="#">Notifications</a>
      </nav>
      <a href="{% url 'logout' %}" class="logout-btn">Logout</a>
    </div>
  </header>

  <section class="dashboard">
    <h2>My Assigned Duties</h2>
    <p>View your scheduled tasks and mark them as completed.</p>

    <!-- ‚úÖ Dynamic Duties Section -->
    <div class="duties-container">
      {% for duty in duties %}
        <div class="duty-card">
          <h3>{{ duty.title }}</h3>
          <p><strong>Time:</strong> {{ duty.time_start }} - {{ duty.time_end }}</p>
          <p><strong>Location:</strong> {{ duty.location }}</p>
          <p><strong>Description:</strong> {{ duty.description }}</p>
          <p><span class="status {{ duty.status }}">{{ duty.status|capfirst }}</span></p>

          {% if duty.status == "pending" %}
          <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="duty_id" value="{{ duty.id }}">
            <button class="mark-btn" type="submit">Mark as Completed</button>
          </form>
          {% else %}
          <button class="mark-btn completed-btn" disabled>Completed</button>
          {% endif %}
        </div>
      {% empty %}
        <p>No assigned duties yet.</p>
      {% endfor %}
    </div>
  </section>
</body>
</html>
